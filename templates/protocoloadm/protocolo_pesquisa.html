{% extends "protocoloadm/protocoloadm_detail.html" %}
{% load i18n %}
{% load crispy_forms_tags %}

{% block detail_content %}
	{% if protocolos %}		
		<form method="POST">
			{% csrf_token %}
			Total: {{ protocolos|length }} 
		
			<table>
				<tr><td>Número de Protocolo</td>
					<td>Ano</td>					
					<td>Assunto</td>
					<td>Tipo de Documento</td>
					<td>Data</td>
				</tr>
				{% for p in protocolos %}
					<tr><td>{{ p.numero }}</td>
						<td>{{ p.ano }}</td>					
						<td>{{ p.assunto_ementa }}</td>
						<td>{{ p.tipo_documento }}</td>
						<td>{{ p.data|date:"d/m/Y" }}</td>
					</tr>
				{% endfor %}
			</table>
			{% if is_paginated %}
			  <nav class="pagination-centered">
			    <ul class="pagination">
			      {% if page_obj.has_previous %}
			        <li>
			          <a href="?page={{ page_obj.previous_page_number }}">
			            <span class="arrow">&laquo;</span>
			          </a>
			        </li>
			      {% else %}
			        <li class="arrow unavailable"><a href="">&laquo;</a></li>
			      {% endif %}

			      {% for page in paginator.page_range %}
			        <li {% if page == page_obj.number %}class="active current"{% endif %}>
			          <a href="?page={{ page }}">{{ page }}</a>
			        </li>
			      {% endfor %}

			      {% if page_obj.has_next %}
			        <li>
			          <a href="?page={{ page_obj.next_page_number }}">
			            <span class="arrow">&raquo;</span>
			          </a>
			        </li>
			      {% else %}
			        <li class="arrow unavailable"><a href="">&raquo;</a></li>
			      {% endif %}
			    </ul>
			  </nav>
			{% endif %}
		</form>
	{% else %}
		<form method="post">
			{% csrf_token %}
			<fieldset>
			<legend>Pesquisa Avançada</legend>
				{{ form.as_p }}
				<input type="submit" value="Pesquisar" name="pesquisa" class="button primary"/>
			</fieldset>
		</form>
	{% endif %}
{% endblock detail_content %}

{% block foot_js %}
   <script type="text/javascript">
    	$(function () {
			$('.dateinput').fdatepicker({
				// TODO localize
				format: 'dd/mm/yyyy',
				language: 'pt',
				endDate: '31/12/2100',
				todayBtn: true
			});
		});
	</script>
{% endblock %}