{% extends "sessao/sessaoplenaria_detail.html" %}
{% load i18n %}

{% block detail_content %}
<form id="form-votacao" method="post">
	{% csrf_token %}

	<fieldset>
		<legend>{{votacao_titulo}}</legend>

		{% if form.errors %}
			<div class="alert-box alert">
				<b><h4>Os seguintes erros foram encontrados:</h4></b>
				<ul>
					{% for field in form %}
						{% if field.errors %}
							{% if field.label == 'total'%}
								<li>O total de votos não corresponde com a quantidade de presentes!</li>
							{% else %}
								<li>O campo <b>{{field.label}}</b> é obrigatório!</li>
							{% endif %}
						{% endif %}
					{% endfor %}
				</ul>
			</div>
		{% endif %}

		<div>
			<b>Matéria:</b> {{materia.materia|safe}}
			<br />
			<b>Ementa:</b> {{materia.ementa|safe}}
			<br />
			<br />
			<b>Total presentes:</b> {{total_presentes}} (com presidente)
			<input type="hidden" id="total_votos" name="total_votos"> 
		</div>
		<br />

		<ul class="small-block-grid-3 medium-block-grid-3 large-block-grid-3">
			<li>Sim: <input type="text" id="votos_sim" name="votos_sim" value=""/></li>
			<li>Não: <input type="text" id="votos_nao" name="votos_nao" value=""/></li>
			<li>Abstenções: <input type="text" id="abstencoes" name="abstencoes" value=""/></li>
		</ul>

		<ul class="small-block-grid-2 medium-block-grid-2 large-block-grid-2">
			<li>
				A totalização inclui o voto do Presidente?
				<select id="voto_presidente" name="voto_presidente">
					<option value="1">Sim</option>
					<option value="0" selected>Não</option>
				</select>
			</li>

			<li>
				Resultado da Votação
				<select id="resultado_votacao" name="resultado_votacao">
					{% for tipo in view.get_tipos_votacao %}
						<option value="{{tipo.id}}">{{tipo.nome}}</option>
					{% endfor %}
				</select>
			</li>
		</ul>

		<ul class="small-block-grid-1 medium-block-grid-1 large-block-grid-1">
			<li>
				Observações
				<textarea id="observacao" name="observacao" cols="10" rows="10"></textarea>
			</li>
		</ul>
			
		<br /><br />
		<input type="submit" id="salvar-votacao" name="salvar-votacao" value="Salvar" class="button primary" />
		<input type="submit" id="cancelar-votacao" name="cancelar-votacao" value="Cancelar Votação" class="button primary" />
	</fieldset>
</form>
{% endblock detail_content %}
