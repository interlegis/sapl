(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-3e2c11a1"],{3713:function(t,e,a){"use strict";(function(t){var n=a("975e");e.a={name:"sessao-plenaria-item-list",props:["sessao"],data:function(){return{utils:n.a.Utils,app:["sessao","parlamentares"],model:["sessaoplenaria","sessaolegislativa","tiposessaoplenaria","legislatura"],data_inicio:new Date,sessao_legislativa:{numero:""},tipo:{nome:""},legislatura:{numero:""},metadata:{sessao_legislativa:{app:"parlamentares",model:"sessaolegislativa",id:this.sessao.sessao_legislativa},legislatura:{app:"parlamentares",model:"legislatura",id:this.sessao.legislatura},tipo:{app:"sessao",model:"tiposessaoplenaria",id:this.sessao.tipo}}}},watch:{sessao:function(t){this.updateSessao(),this.fetch()}},computed:{titulo:function(){var t=this.sessao,e=this.tipo,a=this.data_inicio;return"".concat(t.numero,"ª ").concat(e.nome," da \n              ").concat(a.getDate()>15?2:1,"ª Quizena do Mês de \n              ").concat(this.month_text(a.getMonth())," de \n              ").concat(a.getFullYear(),"\n              ")},subtitulo:function(){return"".concat(this.sessao_legislativa.numero,"ª Sessão Legislativa da \n              ").concat(this.legislatura.numero,"ª Legislatura")},date_text:function(){return"".concat(this.data_inicio.getDate()," de \n              ").concat(this.month_text(this.data_inicio.getMonth())," de\n              ").concat(this.data_inicio.getFullYear()," – ").concat(this.sessao.hora_inicio)}},methods:{sendStore:function(){this.insertInState({app:"sessao",model:"sessaoplenaria",id:this.sessao.id,value:this.sessao})},month_text:function(t){return["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"][t]},fetch:function(){var e=this;t.mapKeys(e.metadata,function(t,a){var n=e.metadata[a];n.component=e;var s=e.getModel(n);null===s?e.insertInState(n).then(function(t){e[a]=e.getModel(n)[n.id]}):void 0===s[n.id]?e.$nextTick().then(function(){setTimeout(function(){e.fetch()},100)}):e[a]=s[n.id]})},updateSessao:function(){this.data_inicio=this.stringToDate(this.sessao.data_inicio,"yyyy-mm-dd","-"),this.metadata.sessao_legislativa.id=this.sessao.sessao_legislativa,this.metadata.tipo.id=this.sessao.tipo,this.metadata.legislatura.id=this.sessao.legislatura}},mounted:function(){this.updateSessao(),this.fetch()}}}).call(this,a("2ef0"))},"3bb2":function(t,e,a){},4358:function(t,e,a){"use strict";var n=a("3713").a,s=(a("e94f"),a("0c7c")),i=Object(s.a)(n,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("router-link",{class:"sessao-plenaria-item-list",attrs:{to:{name:"sessao_plenaria_online_link",params:{id:t.sessao.id}}},nativeOn:{click:function(e){return t.sendStore(e)}}},[a("h5",{staticClass:"tit"},[t._v("\n    "+t._s(t.titulo)+"\n  ")]),a("div",{staticClass:"subtitulo"},[a("span",[t._v(t._s(t.subtitulo))]),a("span",{staticClass:"separator"},[t._v(" – ")]),a("span",[t._v(t._s(t.date_text))])])])},[],!1,null,null,null);e.a=i.exports},"4d36":function(t,e,a){"use strict";(function(t){var n=a("975e");e.a={name:"model-select",props:["app","model","label","limit","ordering","choice"],data:function(){return{utils:n.a.Utils,selected:null,options:[{value:null,text:this.label}]}},watch:{selected:function(t,e){this.$emit("change",t)}},methods:{fetch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=this;a.utils.getModelOrderedList(a.app,a.model,a.ordering,e).then(function(e){t.each(e.data.results,function(t,e){a.options.push({value:t.id,text:t[a.choice]}),a.insertInState({app:a.app,model:a.model,value:t})}),null!==e.data.pagination.next_page&&a.fetch(e.data.pagination.next_page)}).catch(function(t){return a.sendMessage({alert:"danger",message:"Não foi possível recuperar a lista...",time:5})})}},created:function(){this.fetch()}}}).call(this,a("2ef0"))},"5eaf":function(t,e,a){"use strict";var n=a("3bb2");a.n(n).a},"909b":function(t,e,a){"use strict";var n=a("fe0a");a.n(n).a},c419:function(t,e,a){},cc9a:function(t,e,a){"use strict";var n=a("c419");a.n(n).a},d92f:function(t,e,a){"use strict";a.r(e);var n=a("975e"),s={name:"year-exists-in-model-select",props:["app","model","label"],data:function(){return{utils:n.a.Utils,selected:null,options:[{value:null,text:this.label}]}},watch:{selected:function(t,e){this.$emit("change",t)}},methods:{fetch:function(){var t=this;this.utils.getYearsChoiceList(this.app,this.model).then(function(e){t.options=e.data,t.options.unshift({value:null,text:t.label})}).catch(function(e){return t.sendMessage({alert:"danger",message:"Não foi possível recuperar a lista de anos",time:5})})}},created:function(){this.fetch()}},i=a("0c7c"),o=Object(i.a)(s,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-form-select",{attrs:{options:t.options},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1)},[],!1,null,null,null).exports,l={name:"pagination",props:["pagination"],data:function(){return{currentPage:this.pagination.page}},watch:{currentPage:function(t,e){this.$emit("currentPage",t)},pagination:function(t){this.currentPage=t.page}},methods:{nextPage:function(){this.$emit("nextPage")},previousPage:function(){this.$emit("previousPage")}}},r=(a("5eaf"),Object(i.a)(l,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"widget-pagination d-flex justify-content-between align-items-center w-100"},[a("span",{class:["arrow",null!==t.pagination.previous_page?"hover-circle":"disabled"],on:{click:t.previousPage}},[a("i",{staticClass:"fas fa-chevron-left"})]),a("div",{staticClass:"pages"},[t._v("\n    "+t._s(t.pagination.start_index)+"–"+t._s(t.pagination.end_index)+" de "+t._s(t.pagination.total_entries)+"\n    "),a("div",{staticClass:"inner"},[a("b-pagination",{attrs:{align:"right","total-rows":t.pagination.total_entries,"per-page":10},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)]),a("span",{class:["arrow",null!==t.pagination.next_page?"hover-circle":"disabled"],on:{click:t.nextPage}},[a("i",{staticClass:"fas fa-chevron-right"})])])},[],!1,null,null,null).exports),c={name:"month-select",data:function(){return{selected:null,options:[{value:null,text:"Filtre por mês..."},{value:1,text:"Janeiro"},{value:2,text:"Fevereiro"},{value:3,text:"Março"},{value:4,text:"Abril"},{value:5,text:"Maio"},{value:6,text:"Junho"},{value:7,text:"Julho"},{value:8,text:"Agosto"},{value:9,text:"Setembro"},{value:10,text:"Outubro"},{value:11,text:"Novembro"},{value:12,text:"Dezembro"}]}},watch:{selected:function(t,e){this.$emit("change",t)}}},u=Object(i.a)(c,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-form-select",{attrs:{options:t.options},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1)},[],!1,null,null,null).exports,p=a("4d36").a,h={name:"form-sessao-list",props:["pagination"],components:{YearExistsInModelSelect:o,MonthSelect:u,ModelSelect:Object(i.a)(p,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-form-select",{attrs:{options:t.options},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1)},[],!1,null,null,null).exports,Pagination:r},data:function(){return{form_filter:{year:null,month:null,tipo:null}}},watch:{"form_filter.year":function(t){this.$emit("changeFilter",this.form_filter)},"form_filter.month":function(t){this.$emit("changeFilter",this.form_filter)},"form_filter.tipo":function(t){this.$emit("changeFilter",this.form_filter)}},methods:{currentPage:function(t){this.$emit("currentPage",t)},nextPage:function(){this.$emit("nextPage")},previousPage:function(){this.$emit("previousPage")}}},d=(a("909b"),{name:"sessao-list",components:{FormSessaoList:Object(i.a)(h,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-sessao-list"},[a("year-exists-in-model-select",{staticClass:"form-opacity",attrs:{app:"sessao",model:"sessaoplenaria",label:"Filtre por Ano"},on:{change:function(e){return t.form_filter.year=e}}}),a("month-select",{staticClass:"form-opacity",on:{change:function(e){return t.form_filter.month=e}}}),a("model-select",{staticClass:"form-opacity",attrs:{app:"sessao",model:"tiposessaoplenaria",label:"Filtre por Tipo de Sessão",choice:"nome",ordering:"nome"},on:{change:function(e){return t.form_filter.tipo=e}}}),a("pagination",{attrs:{pagination:t.pagination},on:{nextPage:t.nextPage,previousPage:t.previousPage,currentPage:t.currentPage}})],1)},[],!1,null,null,null).exports,SessaoPlenariaItemList:a("4358").a},data:function(){return{utils:n.a.Utils,init:!1,app:["sessao"],model:["sessaoplenaria","tiposessaoplenaria"],ordering:"-data_inicio, -hora_inicio, -id",sessoes:[],pagination:{},form_filter:{year:null,month:null,tipo:null}}},methods:{currentPage:function(t){this.fetch(t)},nextPage:function(){return null!==this.pagination.next_page?this.fetch(this.pagination.next_page):null},previousPage:function(){return null!==this.pagination.previous_page?this.fetch(this.pagination.previous_page):null},changeFilter:function(t){this.form_filter=t,this.fetch(1)},fetch:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this;null===t&&(t=e.pagination.page);var a="",n=this.form_filter;return null!==n.year&&(a+="&year=".concat(n.year)),null!==n.month&&(a+="&month=".concat(n.month)),null!==n.tipo&&(a+="&tipo=".concat(n.tipo)),e.utils.getModelOrderedList(e.app[0],e.model[0],e.ordering,null===t?1:t,a).then(function(t){e.init=!0,e.sessoes=[],e.$nextTick().then(function(){e.sessoes=t.data.results,e.pagination=t.data.pagination})}).catch(function(a){1!==t&&e.fetch(e.pagination.previous_page).catch(function(){e.init=!0,e.sendMessage({alert:"danger",message:"Não foi possível recuperar a lista...",time:5})})})}},created:function(){this.fetch(1)}}),f=(a("cc9a"),Object(i.a)(d,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sessaoplenaria-list"},[a("form-sessao-list",{attrs:{pagination:t.pagination},on:{nextPage:t.nextPage,previousPage:t.previousPage,currentPage:t.currentPage,changeFilter:t.changeFilter}}),a("div",{staticClass:"inner-list"},[t._l(t.sessoes,function(t,e){return a("sessao-plenaria-item-list",{key:e,attrs:{sessao:t}})}),0===t.sessoes.length&&t.init?a("div",{staticClass:"empty-list"},[t._v("\n        Não foram encontradas Sessões Plenárias com seus critérios de busca!\n    ")]):t._e(),t.init?t._e():a("div",{staticClass:"empty-list"},[t._v("\n        Carregando listagem...\n    ")])],2)],1)},[],!1,null,null,null));e.default=f.exports},e94f:function(t,e,a){"use strict";var n=a("f16d");a.n(n).a},f16d:function(t,e,a){},fe0a:function(t,e,a){}}]);