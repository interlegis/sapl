(function(t){function e(e){for(var i,a,l=e[0],d=e[1],r=e[2],p=0,u=[];p<l.length;p++)a=l[p],Object.prototype.hasOwnProperty.call(n,a)&&n[a]&&u.push(n[a][0]),n[a]=0;for(i in d)Object.prototype.hasOwnProperty.call(d,i)&&(t[i]=d[i]);c&&c(e);while(u.length)u.shift()();return s.push.apply(s,r||[]),o()}function o(){for(var t,e=0;e<s.length;e++){for(var o=s[e],i=!0,l=1;l<o.length;l++){var d=o[l];0!==n[d]&&(i=!1)}i&&(s.splice(e--,1),t=a(a.s=o[0]))}return t}var i={},n={compilacao:0},s=[];function a(e){if(i[e])return i[e].exports;var o=i[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,a),o.l=!0,o.exports}a.m=t,a.c=i,a.d=function(t,e,o){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(a.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(o,i,function(e){return t[e]}.bind(null,i));return o},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/static/sapl/frontend/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],d=l.push.bind(l);l.push=e,l=l.slice();for(var r=0;r<l.length;r++)e(l[r]);var c=d;s.push([1,"chunk-vendors"]),o()})({1:function(t,e,o){t.exports=o("aa79")},"14f1":function(t,e,o){"use strict";const i=window.$;function n(t,e){i("html, body").animate({scrollTop:i("#dne"+t).offset().top-window.innerHeight/5},300),window.refreshDatePicker(),i("#dne"+t+" #button-id-submit-form").click(s),i("#dne"+t+" .btn-close-container").click((function(){i(this).closest(".dne-nota").removeClass("dne-nota"),i(this).closest(".dne-form").html("")})),"nota"===e?i("#dne"+t+' select[name="tipo"]').change((function(e){let o="";o="text/"+t+"/nota/create?action=modelo_nota&id_tipo="+this.value,i.get(o).done((function(e){i("#dne"+t+' textarea[name="texto"]').val(e)}))})):"vide"===e&&window.DispositivoSearch({url_form:"/ta/search_form",text_button:"Definir Dispositivo"})}function s(t){let e="",o="nota",s=null,a=i("#id_dispositivo").val();void 0===a&&(a=i("#id_dispositivo_base").val(),o="vide"),s=i("#id_pk").val(),e="text/"+a+"/"+o+"/",e+=null===s||""===s?"create":s+"/edit",i.post(e,i("#dne"+a+" form").serialize(),(function(t){if("string"===typeof t)if(t.indexOf("<form")>=0)i("#dne"+a+" .dne-form").html(t),n(a,o);else{i("#dne"+a+" .dne-form").closest(".dpt").html(t),d();try{i("html, body").animate({scrollTop:i("#dne"+a).offset().top-window.innerHeight/3},300)}catch(e){}}}))}function a(t){const e=i(t).attr("model"),o=i(t).closest(".dn").attr("pk"),n=i(t).attr("pk"),s="text/"+o+"/"+e+"/"+n+"/delete";i.get(s,(function(t){i("#dne"+o+" .dne-form").closest(".dpt").html(t),d()}))}function l(t){let e="";const o=i(t).attr("model");let s=i(".dne-nota .dne-form").closest(".dne").attr("pk");if(null!=s&&(i("#dne"+s).removeClass("dne-nota"),i("#dne"+s+" .dne-form").html("")),t.className.indexOf("create")>=0)s=i(t).attr("pk"),e="text/"+s+"/"+o+"/create";else if(t.className.indexOf("edit")>=0){const n=i(t).attr("pk");s=i(t).closest(".dn").attr("pk"),e="text/"+s+"/"+o+"/"+n+"/edit"}i("#dne"+s).addClass("dne-nota"),i.get(e).done((function(t){i("#dne"+s+" .dne-form").html(t),n(s,o)})).fail((function(){d()}))}function d(){i(".dne-nota").removeClass("dne-nota"),i(".dne-form").html(""),i(".dne .btn-action").off(),i(".dn .btn-action").off(),i(".dne .btn-action, .dn .btn-action").not(".btn-nota-delete").not(".btn-vide-delete").click((function(){l(this)})),i(".dn .btn-nota-delete, .dn .btn-vide-delete").click((function(){a(this)}))}e["a"]={onEventsDneExec:n,onSubmitEditNVForm:s,onDelete:a,onReadyNotasVides:d}},"3f52":function(t,e,o){},aa79:function(t,e,o){"use strict";o.r(e),function(t,e){o("3f52");var i=o("c159"),n=o("dcc8"),s=o("14f1");o("cad0");t.forEach(t.merge(t.merge(i["a"],s["a"]),n["a"]),(function(t,e){window[e]=t})),e(document).ready((function(){window.InitViewTAs(),window.onReadyNotasVides()}))}.call(this,o("2ef0"),o("1157"))},c159:function(t,e,o){"use strict";(function(t){const o=window.$;function i(t,e,o){const i=new Date,n=new Date;null!==o&&0!==o||(o=1),n.setTime(i.getTime()+864e5*o),document.cookie=t+"="+escape(e)+";expires="+n.toGMTString()}function n(t){const e=" "+document.cookie;let o=e.indexOf(" "+t+"=");if(-1===o&&(o=e.indexOf(";"+t+"=")),-1===o||""===t)return"";let i=e.indexOf(";",o+1);return-1===i&&(i=e.length),unescape(e.substring(o+t.length+2,i))}function s(t){o(t).append('<div style="text-align:center;"><i style="font-size: 200%;" class="fa fa-refresh fa-spin"></i></div>')}function a(t){o((function(){let e={},i=o("body").children("#container_ds");i.length>0&&o(i).remove(),i=o('<div id="container_ds"/>'),o("body").prepend(i);const n=o('[data-sapl-ta="DispositivoSearch"]');n.each((function(){const n=o(this),a=n.attr("data-type-selection"),l=n.attr("data-field"),d=n.attr("data-function"),r=function(t){if("checkbox"===a){const t=n.find('input[name="ta_select_all"]');t.off(),t.on("change",(function(t){o(this).closest("ul").find('input[name="'+l+'"]').prop("checked",this.checked)}))}else{const t=n.find("input");t.off(),t.attr("type","hidden"),o('<a class="text-danger">').insertBefore(t).append(o('<span aria-hidden="true">&times;</span>')).on("click",(function(){2===o(this).closest("ul").find("li").length?o(this).closest("ul").remove():o(this).closest("li").remove()}))}};r();const c=function(t){const i=o('select[name="tipo_ta"]').val(),n=o('select[name="tipo_model"]').val(),r=o('input[name="num_ta"]').val(),c=o('input[name="ano_ta"]').val();let p=o('input[name="tipo_resultado"]:checked').val();const u=o('input[name="rotulo_dispositivo"]').val(),f=o('input[name="texto_dispositivo"]').val(),m=o('select[name="max_results"]').val();let h="";u.length>0||f.length>0?(o('input[name="tipo_resultado"]').prop("disabled",!1),o('input[name="tipo_resultado"]').each((t,e)=>{e.parentElement.classList.remove("disabled")}),o('input[name="tipo_resultado"]').closest("#div_id_tipo_resultado").css("opacity","1")):(o('input[name="tipo_resultado"]').filter('[value="False"]').prop("checked",!0),o('input[name="tipo_resultado"]').prop("disabled",!0),o('input[name="tipo_resultado"]').each((t,e)=>{e.parentElement.classList.add("disabled")}),o('input[name="tipo_resultado"]').closest("#div_id_tipo_resultado").css("opacity","0.3"),p="False"),e={tipo_ta:i,tipo_model:n,num_ta:r,ano_ta:c,texto:f,rotulo:u,tipo_resultado:p,max_results:m,data_type_selection:a,data_field:l,data_function:d},window.localStorage.setItem("dispositivo_search_form_data",JSON.stringify(e)),h="/ta/search_fragment_form",o(".result-busca-dispositivo").html(""),s(".result-busca-dispositivo"),o.get(h,e).done((function(t){if(o(".result-busca-dispositivo").html(t),"checkbox"===a){const t=o(".result-busca-dispositivo").find('input[name="ta_select_all"]');t.off(),t.on("change",(function(t){o(this).closest("ul").find('input[name="'+l+'"]').prop("checked",this.checked)}))}}))},p=function(t){const e=o('input[name="rotulo_dispositivo"]').val(),i=o('input[name="texto_dispositivo"]').val();e.length>0||i.length>0?(o('input[name="tipo_resultado"]').prop("disabled",!1),o('input[name="tipo_resultado"]').each((t,e)=>{e.parentElement.classList.remove("disabled")}),o('input[name="tipo_resultado"]').closest("#div_id_tipo_resultado").css("opacity","1")):(o('input[name="tipo_resultado"]').filter('[value="False"]').prop("checked",!0),o('input[name="tipo_resultado"]').prop("disabled",!0),o('input[name="tipo_resultado"]').each((t,e)=>{e.parentElement.classList.add("disabled")}),o('input[name="tipo_resultado"]').closest("#div_id_tipo_resultado").css("opacity","0.3"))};let u=n.children("#buttonDs");u.length>0&&o(u).remove(),u=o('<div id="buttonDs" class="clearfix"/>'),n.prepend(u);const f=o("<button>").text(t.text_button).attr("type","button").attr("class","btn btn-sm btn-success btn-modal-open");u.append(f),f.on("click",(function(){o.get(t.url_form,(function(s){i.html(s);const d=o("#modal-ds");d.find('select[name="tipo_ta"]').change((function(t){let i="";i="/ta/search_fragment_form?action=get_tipos&tipo_ta="+this.value,d.find('label[for="id_tipo_model"]').html("Tipos de "+this.children[this.selectedIndex].innerHTML);const n=d.find('select[name="tipo_model"]');n.empty(),o('<option value="">Carregando...</option>').appendTo(n),o.get(i).done((function(t){n.empty();for(const e in t)for(const i in t[e])n.append(o("<option>").attr("value",i).text(t[e][i]));setTimeout((function(){o('select[name="tipo_model"]').val(e.tipo_model)}),200)}))})),d.find('input[name="texto_dispositivo"], input[name="rotulo_dispositivo"]').on("keyup",p),d.find(".btn-busca").click(c),d.find("#btn-modal-select").click((function(){const e=n.find("ul");"radio"===a&&e.remove();const i=d.find('[name="'+l+'"]:checked');i.closest("ul").find("input:not(:checked)").filter('[name!="ta_select_all"]').closest("li").remove(),i.closest("ul").each((function(){const t=n.find("#"+this.id);if(0===t.length)return void n.append(this);const e=o(this).find("input");e.each((function(){t.find("#"+this.id).length>0||t.append(o(this).closest("li"))}))})),r(),d.modal("hide"),"post_selected"in t&&t.post_selected(t.params_post_selected)}));try{e=JSON.parse(window.localStorage.getItem("dispositivo_search_form_data")),o('input[name="num_ta"]').val(e.num_ta),o('input[name="ano_ta"]').val(e.ano_ta),o('input[name="rotulo_dispositivo"]').val(e.rotulo),o('input[name="texto_dispositivo"]').val(e.texto),o('select[name="max_results"]').val(e.max_results),o('input[name="tipo_resultado"]').filter(`[value="${e.tipo_resultado}"]`).attr("checked",!0)}catch(u){}setTimeout((function(){try{o('select[name="tipo_ta"]').val(e.tipo_ta),o('select[name="tipo_ta"]').trigger("change")}catch(u){}}),200),d.modal("show")}))})),"autostart"in t&&t.autostart&&f.trigger("click")}))}))}function l(){setTimeout((function(){var e=location.href.split("#");if(2===e.length)try{t("html, body").animate({scrollTop:t("#dptt"+e[1]).offset().top-window.innerHeight/9},0)}catch(o){}}),100),t("#btn_font_menos").click((function(){t(".dpt").css("font-size","-=1")})),t("#btn_font_mais").click((function(){t(".dpt").css("font-size","+=1")})),t(".dpt.bloco_alteracao .dpt").each((function(){var e=parseInt(t(this).attr("nivel"));t(this).css("z-index",15-e)})),t(".cp-linha-vigencias > li:not(:first-child):not(:last-child) > a").click((function(e){t(".cp-linha-vigencias > li").removeClass("active"),t(this).closest("li").addClass("active"),e.preventDefault()})),t("main").click((function(e){e.target!==this&&e.target!==this.firstElementChild||t(".cp-linha-vigencias > li").removeClass("active")}))}e["a"]={SetCookie:i,ReadCookie:n,insertWaitAjax:s,InitViewTAs:l,DispositivoSearch:a}}).call(this,o("1157"))},cad0:function(t,e,o){(function(t){const e=window.$;window.DispositivoEdit=function(){let t,o="textarea";if(!(this instanceof window.DispositivoEdit))return t||(t=new window.DispositivoEdit),t;t=this,window.DispositivoEdit=function(){return t},t.bindActionsEditorType=function(i){o=this.getAttribute("editortype"),window.SetCookie("editortype",o,30);const n=e(this).closest(".dpt"),s=n.attr("pk");t.clearEditSelected(),t.triggerBtnDptEdit(s),i.preventDefault()},t.bindActionsClick=function(o){const i=this.getAttribute("pk"),n={action:this.getAttribute("action"),tipo_pk:this.getAttribute("tipo_pk"),perfil_pk:this.getAttribute("perfil_pk"),variacao:this.getAttribute("variacao"),pk_bloco:this.getAttribute("pk_bloco")},s=i+"/refresh";t.waitShow(),e.get(s,n).done((function(e){t.clearEditSelected(),null!=e.pk&&t.message(e)})).fail(t.waitHide).always(t.waitHide)},t.clearEditSelected=function(){e(".dpt-selected > .dpt-form").html(""),e(".dpt-actions, .dpt-actions-bottom").html(""),window.tinymce.remove(),e(".dpt-selected").removeClass("dpt-selected")},t.editDispositivo=function(o){const i=o.target.classList.contains("dpt-link")?o.target:o.target.parentElement.classList.contains("dpt-link")?o.target.parentElement:null;if(i&&i.getAttribute("href")&&i.getAttribute("href").length>0)return;const n=e(this).closest(".dpt");if(n.hasClass("dpt-selected"))return void("editor-close"===this.getAttribute("action")&&t.clearEditSelected());t.clearEditSelected(),t.loadActionsEdit(n);const s=n.attr("formtype");n.on(s,t[s]),t.loadForm(n,s)},t.gc=function(){setTimeout((function(){e(".dpt:not(.dpt-selected) > .dpt-form").html("")}),500)},t.get_form_base=function(){const o=e(this);o.addClass("dpt-selected");const i=o.children().filter(".dpt-form");i.find("form").submit(t.onSubmitEditFormBase),t.scrollTo(o),o.off("get_form_base");const n=o.find(".btn-fechar");n.on("click",(function(e){t.clearEditSelected(),e.preventDefault()}));const s=o.find(".btns-excluir");o.find(".dpt-actions-bottom").first().append(s),s.find(".btn-outline-danger").on("click",t.bindActionsClick)},t.get_form_alteracao=function(){const o=e(this);o.off("get_form_alteracao"),e(".dpt-actions, .dpt-actions-bottom").html("");const i=o.children().filter(".dpt-form").children().first(),n=i[0].id_dispositivo_search_form.value;window.DispositivoSearch({url_form:n,text_button:"Selecionar",autostart:!0}),t.scrollTo(o),i.submit(t.onSubmitFormRegistraAlteracao);const s=o.find(".btn-fechar");s.on("click",(function(e){t.clearEditSelected(),t.triggerBtnDptEdit(o.attr("pk")),e.preventDefault()}))},t.get_form_inclusao=function(){const o=e(this);o.off("get_form_inclusao"),e(".dpt-actions, .dpt-actions-bottom").html("");const i=o.children().filter(".dpt-form").children().first(),n=i[0].id_dispositivo_search_form.value;window.DispositivoSearch({url_form:n,text_button:"Selecionar",post_selected:t.allowed_inserts_registro_inclusao,params_post_selected:{pk_bloco:o.attr("pk")},autostart:!0}),t.scrollTo(o),i.submit(t.onSubmitFormRegistraInclusao);const s=o.find(".btn-fechar");s.on("click",(function(e){t.clearEditSelected(),t.triggerBtnDptEdit(o.attr("pk")),e.preventDefault()}))},t.get_form_revogacao=function(){const o=e(this);o.off("get_form_revogacao"),e(".dpt-actions, .dpt-actions-bottom").html("");const i=o.children().filter(".dpt-form").children().first(),n=i[0].id_dispositivo_search_form.value;window.DispositivoSearch({url_form:n,text_button:"Selecionar",autostart:!0}),t.scrollTo(o),i.submit(t.onSubmitFormRegistraRevogacao);const s=o.find(".btn-fechar");s.on("click",(function(){t.clearEditSelected(),t.triggerBtnDptEdit(o.attr("pk"))}))},t.allowed_inserts_registro_inclusao=function(o){const i=e("#id"+o.pk_bloco+" input[name='dispositivo_base_para_inclusao']");if(0===i.length)return;const n=i[0].value,s={action:"get_actions_allowed_inserts_registro_inclusao",pk_bloco:o.pk_bloco},a=n+"/refresh";t.waitShow(),e.get(a,s).done((function(o){e(".allowed_inserts").html(o),e(".allowed_inserts").find(".btn-action").on("click",t.bindActionsClick)})).fail(t.waitHide).always(t.waitHide)},t.loadActionsEdit=function(i){const n=i.attr("pk"),s=n+"/refresh?action=get_actions";e.get(s).done((function(n){i.find(".dpt-actions").first().html(n),i.find(".btn-action").on("click",t.bindActionsClick),i.find(".btn-compila").on("click",t.loadFormsCompilacao),i.find(".btn-editor-type").on("click",t.bindActionsEditorType),"construct"===o&&(i.find(".btn-group-inserts").first().addClass("open show"),i.find(".btn-group-inserts ul").first().addClass("show")),i.find(".btn-group-inserts button").mouseenter((function(t){i.find(".btn-group-inserts ul").removeClass("show"),i.find(".btn-group-inserts").removeClass("open show"),e(this.parentElement).addClass("open show"),e(this.parentElement).find("ul").addClass("show")})),i.find(".btn-group-inserts").mouseleave((function(t){i.find(".btn-group-inserts ul").removeClass("show"),i.find(".btn-group-inserts").removeClass("open show")})),t.gc()}))},t.loadForm=function(i,n){const s=i.attr("pk"),a=i.children().filter(".dpt-form");if(1===a.length){const l=s+"/refresh?action="+n;e.get(l).done((function(t){"construct"!==o&&(a.html(t),"tinymce"===o&&window.initTextRichEditor()),i.trigger(n)})).always((function(){t.waitHide()}))}},t.loadFormsCompilacao=function(o){const i=e(this).closest(".dpt"),n=this.getAttribute("action");i.on(n,t[n]),t.loadForm(i,n)},t.modalMessage=function(t,o,i){return null!==t&&""!==t&&(e("#modal-message #message").html(t),e("#modal-message").modal("show"),e("#modal-message, #modal-message .alert button").off(),e("#modal-message .alert").removeClass("alert-success alert-info alert-warning alert-danger alert-danger"),e("#modal-message .alert").addClass(o),null!=i&&e("#modal-message").on("hidden.bs.modal",i),e("#modal-message .alert button").on("click",(function(){e("#modal-message").modal("hide")})),!0)},t.message=function(o){if(void 0!==o.message)if(o.message.modal)t.modalMessage(o.message.value,"alert-"+o.message.type,(function(){t.waitShow(),t.refreshScreenFocusPk(o)}));else{if(t.refreshScreenFocusPk(o),!("message"in o))return;const i=e(".cp-notify");i.removeClass("hide");const n=i.find(".message");n.html(o.message.value),n.removeClass("bg-primary bg-success bg-info bg-warning bg-danger").addClass("bg-"+o.message.type),setTimeout((function(){i.addClass("hide")}),o.message.time?o.message.time:3e3)}else t.refreshScreenFocusPk(o)},t.offClicks=function(){e(".btn-dpt-edit").off()},t.onClicks=function(o){let i;i=null==o?e(".btn-dpt-edit"):e(o).find(".btn-dpt-edit"),i.on("click",t.editDispositivo)},t.onSubmitFormRegistraAlteracao=function(o){if(void 0===this.dispositivo_alterado)return t.modalMessage("Nenhum dispositivo selecionado","alert-info"),void(null!=o&&o.preventDefault());const i=void 0===this.dispositivo_alterado.length?[this.dispositivo_alterado]:Array.from(this.dispositivo_alterado),n={csrfmiddlewaretoken:this.csrfmiddlewaretoken.value,dispositivo_alterado:i.filter((function(t,e,o){return t.checked})).map((function(t){return t.value})),formtype:"get_form_alteracao"},s=e(this).closest(".dpt").attr("pk")+"/refresh";t.waitShow(),e.post(s,n).done((function(e){t.clearEditSelected(),null!=e.pk?t.message(e):alert("Erro na resposta!")})).always((function(){t.waitHide()})),null!=o&&o.preventDefault()},t.onSubmitFormRegistraInclusao=function(o){const i={csrfmiddlewaretoken:this.csrfmiddlewaretoken.value,dispositivo_base_para_inclusao:this.dispositivo_base_para_inclusao.value,formtype:"get_form_inclusao"},n=e(this).closest(".dpt").attr("pk")+"/refresh";t.waitShow(),e.post(n,i).done((function(e){t.clearEditSelected(),null!=e.pk?t.message(e):alert("Erro na resposta!")})).always((function(){t.waitHide()})),null!=o&&o.preventDefault()},t.onSubmitFormRegistraRevogacao=function(o){if(void 0===this.dispositivo_revogado)return t.modalMessage("Nenhum dispositivo selecionado","alert-info"),void(null!=o&&o.preventDefault());const i=void 0===this.dispositivo_revogado.length?[this.dispositivo_revogado]:Array.from(this.dispositivo_revogado),n={csrfmiddlewaretoken:this.csrfmiddlewaretoken.value,dispositivo_revogado:i.filter((function(t,e,o){return t.checked})).map((function(t){return t.value})),revogacao_em_bloco:this.revogacao_em_bloco.value,formtype:"get_form_revogacao"},s=e(this).closest(".dpt").attr("pk")+"/refresh";t.waitShow(),e.post(s,n).done((function(e){t.clearEditSelected(),null!=e.pk?t.message(e):alert("Erro na resposta!")})).always((function(e){t.waitHide()})),null!=o&&o.preventDefault()},t.onSubmitEditFormBase=function(o){const i=this;let n="",s="",a="";const l=window.tinymce.get("id_texto"),d=window.tinymce.get("id_texto_atualizador");n=null!=l?l.getContent():this.id_texto.value,null!=d?s=d.getContent():"id_texto_atualizador"in this&&(s=this.id_texto_atualizador.value),"visibilidade"in this&&(a=this.visibilidade.value);const r={csrfmiddlewaretoken:this.csrfmiddlewaretoken.value,texto:n,texto_atualizador:s,visibilidade:a,formtype:"get_form_base"},c=e(this).closest(".dpt").attr("pk")+"/refresh";t.waitShow(),e.post(c,r).done((function(o){if("string"===typeof o){let n=e(i).closest(".dpt");return n=e("#"+n.replaceWith(o).attr("id")),t.onClicks(n),void t.waitHide()}t.clearEditSelected(),null!=o.pk?t.message(o):alert("Erro na resposta!")})).always((function(){t.waitHide()})),null!=o&&o.preventDefault()},t.refreshContent=function(o,i){if(0===o.length)return void t.waitHide();const n=o.shift(),s=n+"/refresh";e.get(s).done((function(s){let a=e("#id"+n).closest(".dpt");a=e("#"+a.replaceWith(s).attr("id")),t.onClicks(a),t.reloadFunctionsDraggables(),i>0&&t.triggerBtnDptEdit(i),t.refreshContent(o)}))},t.refreshScreenFocusPk=function(e){if(t.waitShow(),-1===e.pai[0]){t.waitShow();const o=location.href.split("#")[0];location.href=o+"#"+e.pk,location.reload(!0)}else t.refreshContent(e.pai,e.pk)},t.reloadFunctionsDraggables=function(){e(".dpt-alts").sortable({revert:!0,distance:15,start:function(t,e){},stop:function(t,o){const i=o.item.attr("pk"),n=o.item.closest(".dpt-alts").closest(".dpt").attr("pk"),s=i+"/refresh?action=json_drag_move_dpt_alterado&index="+o.item.index()+"&bloco_pk="+n;e.get(s).done((function(t){}))}}),e(".dpt-alts .dpt").draggable({connectToSortable:".dpt-alts",revert:"invalid",zIndex:1,distance:15,drag:function(t,o){e(".dpt-alts").addClass("drag")},stop:function(t,o){e(".dpt-alts").removeClass("drag")}}),e(".dpt-alts").disableSelection()},t.scrollTo=function(t){try{e("html, body").animate({scrollTop:t.offset().top-window.innerHeight/9},100)}catch(o){}},t.triggerBtnDptEdit=function(t){let o=e("#id"+t+" > .dpt-text.btn-dpt-edit");0===o.length&&(o=e("#id"+t+" > .dpt-actions-fixed > .btn-dpt-edit")),o.first().trigger("click")},t.waitHide=function(){e("#wait_message").addClass("displaynone")},t.waitShow=function(){e("#wait_message").removeClass("displaynone")},t.init=function(){e(".dpt-actions-fixed").first().css("opacity","1"),o=window.ReadCookie("editortype"),null!==o&&""!==o||(o="textarea",window.SetCookie("editortype",o,30)),t.offClicks(),t.onClicks(),t.reloadFunctionsDraggables();const i=location.href.split("#");2===i.length&&""!==i[1]&&t.triggerBtnDptEdit(i[1]),e("main").click((function(e){e.target!==this&&e.target!==this.firstElementChild||t.clearEditSelected()})),t.waitHide()},t.init()},e(document).ready((function(){t(".cpe").length>0&&window.DispositivoEdit()}))}).call(this,o("1157"))},dcc8:function(t,e,o){"use strict";(function(t){const i=window.$,n=o("bf68");function s(e){"function"===typeof t&&e instanceof t&&(e=e[0]);const o=e.getBoundingClientRect();return o.top>=0&&o.left>=0&&o.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&o.right<=(window.innerWidth||document.documentElement.clientWidth)}function a(t,e){let o=null;const a=i(".dptt");for(let n=0;n<a.length;n++)if(!i(a[n]).hasClass("displaynone")&&s(a[n])){o=n+1<a.length?a[n+1]:a[n];break}if(i(".cp .tipo-vigencias a").removeClass("active"),i(t).addClass("active"),i(".dptt.desativado").removeClass("displaynone"),i(".desativado > .dn").removeClass("displaynone"),i(".desativado > .dpt-img").removeClass("displaynone"),i(".dptt.revogado").removeClass("displaynone"),i(".dtxt").removeClass("displaynone"),i(".dtxt.diff").remove(),i(".nota-alteracao").removeClass("displaynone"),e&&i('.dtxt[id^="da"').each((function(){if(i(this).html().search(/<\/\w+>/g)>0)return;const t=i(this).attr("pk"),e=i(this).attr("pks"),o=i("#d"+e).contents().filter((function(){return this.nodeType===Node.TEXT_NODE})),s=i("#da"+t).contents().filter((function(){return this.nodeType===Node.TEXT_NODE})),a=n.diffWordsWithSpace(i(o).text(),i(s).text());if(a.length>0){i("#d"+e).closest(".desativado").addClass("displaynone");const o=i("#da"+t).clone();i("#da"+t).after(o),i("#da"+t).addClass("displaynone"),i(o).addClass("diff").html(""),a.forEach((function(t){const e=document.createElement("span");let n=t.value;t.removed?(i(e).addClass("desativado"),n+=" "):t.added&&i(e).addClass("added"),e.appendChild(document.createTextNode(n)),i(o).append(e)}))}})),o)try{i("html, body").animate({scrollTop:i(o).parent().offset().top-60},0)}catch(l){}}function l(t,e){let o=null;const n=i(".dptt");for(let l=0;l<n.length;l++)if(!i(n[l]).hasClass("displaynone")&&s(n[l])){o=l+1<n.length?n[l+1]:n[l];break}if(i(".cp .tipo-vigencias a").removeClass("active"),i(t).addClass("active"),i(".dptt.desativado").addClass("displaynone"),i(".desativado > .dn").addClass("displaynone"),i(".desativado > .dpt-img").addClass("displaynone"),i(".nota-alteracao").removeClass("displaynone"),i(".dptt.revogado").removeClass("displaynone"),e||i(".nota-alteracao").addClass("displaynone"),o)try{i("html, body").animate({scrollTop:i(o).parent().offset().top-60},0)}catch(a){}}function d(t,e){l(t,e),i(".dptt.revogado").addClass("displaynone")}e["a"]={isElementInViewport:s,textoMultiVigente:a,textoVigente:l,textoVigenteSemRevogados:d}}).call(this,o("1157"))}});
//# sourceMappingURL=compilacao.ae866d2d.js.map