{% extends "base.html" %}
{% load i18n %}
{% load crispy_forms_tags cropping%}
{% load common_tags %}
{% load render_bundle from webpack_loader %}
{% load webpack_static from webpack_loader %}

{% block base_content %}

<div id="composicao_list">

  <fieldset class="form-group">
    <legend>Selecione o Período</legend>
    <form method="GET">
        <select @change="getParlamentares" class="form-control" v-model="composicao_id">
          <option v-for="option in periodo_list" v-bind:value="option.id">
            [[ option.__str__ ]]
          </option>
        </select>
    </form>
  </fieldset>


{% block actions %}
  <div class="d-flex flex-column flex-sm-row   mb-3 justify-content-between align-items-center">
    {% if user.is_authenticated and perms.comissoes.add_participacao and composicao_list %}
      <a  v-bind:href="'/comissao/'+composicao_id+'/participacao/create'" class="btn btn-outline-primary">
        Adicionar Participação em Comissão
      </a>
    {% endif %}
    {% if user.is_authenticated and perms.comissoes.add_composicao %}
      <a href="composicao/create" class="btn btn-outline-primary btn-lg">
        Adicionar Composição de Comissão
      </a>
    {% endif %}
  </div>
{% endblock actions %}


{% block container_table_list %}
  <div class="container-table">
    <table class="table table-striped table-hover table-link-ordering">
      <thead>
        <tr>
          <th>Participações em Comissão</th>
          <th>Cargo</th>
          <th>Titular?</th>
          <th>Designação</th>
          <th>Desligamento</th>
          <th>Motivo</th>
          <th>Observações</th>
        </tr>
      </thead>
      <tbody>
      <tr v-for="p in parlamentares">

        <td>
         <a v-bind:href="'/comissao/participacao/' + p.id">[[ p.nome ]]</a>
        </td>
        <td>[[p.cargo]]</td>
        <td>[[p.titular]]</td>
        <td>[[p.data_designacao]]</td>
        <td>[[p.data_desligamento]]</td>
        <td>[[p.motivo_desligamento]]</td>
        <td>[[p.observacao]]</td>
      </tr>
    </tbody>
    </table>
  </div>
{% endblock %}

</div>

{% endblock base_content %}


{% block webpack_loader_css %}
    {{ block.super }}
    {% render_bundle 'comissoes' 'css' %}
{% endblock %}

{% block webpack_loader_js %}
    {% render_chunk_vendors 'js' %}
    {% render_bundle  'global' 'js' %}
    {% render_bundle 'comissoes' 'js' %}
{% endblock %}
