{% extends "crud/form.html" %}
{% load i18n %}
{% load crispy_forms_tags %}
{% load common_tags %}

{% block base_content %}
  <form method="POST">
	  {% csrf_token %}

    <div class="row-fluid">
      <div class="col-md-12" >
        {{ form.nome|as_crispy_field }}
      </div>
    </div>

    <div class="row-fluid">
      <div class="col-md-6" >
        {{ form.data_criacao|as_crispy_field }}
      </div>
      <div class="col-md-6" >
        {{ form.data_extincao|as_crispy_field }}
      </div>
    </div>

    <div class="row-fluid">
      <div class="col-md-12" >
        {{ form.parlamentares|as_crispy_field }}
      </div>
    </div>

    <div class="row-fluid">
      <div class="col-md-12" >
        {{ form.descricao|as_crispy_field }}
      </div>
    </div>

		<br />
		<input type="submit" value="Salvar" class="btn btn-primary" />
	</form>

{% endblock base_content %}

{% block extra_js %}
	<script language="JavaScript">
    function atualiza_parlamentares() {
        // Coloca para selecao os parlamentares no intervalo informado
        // e somente os ativos, caso seja solicitado
        // var ativos;
        var data_criacao = $("#id_data_criacao").val();
        var data_extincao = $("#id_data_extincao").val();

        if (data_criacao == '') {
            $('#div_id_parlamentares').hide();
        }
        else{
            $('#div_id_parlamentares').show();
        }


    }

    // Fazer a listagem ficar escondida caso n√£o haja data de criacao
    // Caso contrario, lista os parlamentares para aquele intervalo
    $(document).ready(atualiza_parlamentares());
    
    $("#id_data_criacao").change(function () {
        atualiza_parlamentares();
    });
    $("#id_data_extincao").change(function () {
        atualiza_parlamentares();
    });
	</script>
{% endblock %}
