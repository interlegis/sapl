language: python
sudo: required

python:
  - "3.4.3"

services:
  - postgresql


install:
  - sudo apt-get install git nginx python3-dev libpq-dev graphviz-dev graphviz postgresql-contrib pkg-config python-psycopg2 nodejs npm
  - sudo ln -s /usr/bin/node
  - pip install -r requirements/dev-requirements.txt
  - pip install --upgrade setuptools

before_script:
  - npm install -g bower
  - cp .env_dev .env
  - psql -c 'create database sapl;' -U postgres
  - python manage.py syncdb –migrate –noinput

script:
  - python manage.py test
  - ./manage.py bower install
  - ./test_and_check_qa.sh